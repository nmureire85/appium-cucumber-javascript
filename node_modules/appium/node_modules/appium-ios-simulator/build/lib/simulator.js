"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSimulator = getSimulator;
exports.getDeviceString = getDeviceString;

require("source-map-support/register");

var _simulatorXcode = _interopRequireDefault(require("./simulator-xcode-6"));

var _simulatorXcode2 = _interopRequireDefault(require("./simulator-xcode-7"));

var _simulatorXcode3 = _interopRequireDefault(require("./simulator-xcode-7.3"));

var _simulatorXcode4 = _interopRequireDefault(require("./simulator-xcode-8"));

var _simulatorXcode5 = _interopRequireDefault(require("./simulator-xcode-9"));

var _simulatorXcode6 = _interopRequireDefault(require("./simulator-xcode-9.3"));

var _simulatorXcode7 = _interopRequireDefault(require("./simulator-xcode-10"));

var _simulatorXcode8 = _interopRequireDefault(require("./simulator-xcode-11"));

var _simulatorXcode9 = _interopRequireDefault(require("./simulator-xcode-11.4"));

var _utils = require("./utils");

var _appiumXcode = _interopRequireDefault(require("appium-xcode"));

var _logger = require("./logger");

function handleUnsupportedXcode(xcodeVersion) {
  if (xcodeVersion.major < 6) {
    throw new Error(`Tried to use an iOS simulator with xcode ` + `version ${xcodeVersion.versionString} but only Xcode version ` + `6.0.0 and up are supported`);
  }
}

async function getSimulator(udid, opts = {}) {
  let {
    platform = 'iOS',
    checkExistence = true
  } = opts;
  const xcodeVersion = await _appiumXcode.default.getVersion(true);

  if (checkExistence) {
    const simulatorInfo = await (0, _utils.getSimulatorInfo)(udid);

    if (!simulatorInfo) {
      throw new Error(`No sim found with udid '${udid}'`);
    }

    platform = simulatorInfo.platform;
  }

  (0, _logger.setLoggingPlatform)(platform);

  _logger.log.info(`Constructing ${platform} simulator for Xcode version ${xcodeVersion.versionString} ` + `with udid '${udid}'`);

  let SimClass;

  switch (xcodeVersion.major) {
    case 6:
      SimClass = _simulatorXcode.default;
      break;

    case 7:
      if (xcodeVersion.minor < 3) {
        SimClass = _simulatorXcode2.default;
      } else {
        SimClass = _simulatorXcode3.default;
      }

      break;

    case 8:
      SimClass = _simulatorXcode4.default;
      break;

    case 9:
      if (xcodeVersion.minor < 3) {
        SimClass = _simulatorXcode5.default;
      } else {
        SimClass = _simulatorXcode6.default;
      }

      break;

    case 10:
      SimClass = _simulatorXcode7.default;
      break;

    case 11:
      if (xcodeVersion.minor >= 4) {
        SimClass = _simulatorXcode9.default;
      } else {
        SimClass = _simulatorXcode8.default;
      }

      break;

    default:
      handleUnsupportedXcode(xcodeVersion);
      SimClass = _simulatorXcode7.default;
  }

  return new SimClass(udid, xcodeVersion);
}

async function getDeviceString(opts) {
  let xcodeVersion = await _appiumXcode.default.getVersion(true);
  handleUnsupportedXcode(xcodeVersion);

  _logger.log.info(`Retrieving device name string for Xcode version ${xcodeVersion.versionString}`);

  if (xcodeVersion.major >= 8) {
    return await _simulatorXcode2.default.getDeviceString(opts);
  } else if (xcodeVersion.major === 7) {
    return await _simulatorXcode2.default.getDeviceString(opts);
  } else if (xcodeVersion.major === 6) {
    return await _simulatorXcode.default.getDeviceString(opts);
  }
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zaW11bGF0b3IuanMiXSwibmFtZXMiOlsiaGFuZGxlVW5zdXBwb3J0ZWRYY29kZSIsInhjb2RlVmVyc2lvbiIsIm1ham9yIiwiRXJyb3IiLCJ2ZXJzaW9uU3RyaW5nIiwiZ2V0U2ltdWxhdG9yIiwidWRpZCIsIm9wdHMiLCJwbGF0Zm9ybSIsImNoZWNrRXhpc3RlbmNlIiwieGNvZGUiLCJnZXRWZXJzaW9uIiwic2ltdWxhdG9ySW5mbyIsImxvZyIsImluZm8iLCJTaW1DbGFzcyIsIlNpbXVsYXRvclhjb2RlNiIsIm1pbm9yIiwiU2ltdWxhdG9yWGNvZGU3IiwiU2ltdWxhdG9yWGNvZGU3MyIsIlNpbXVsYXRvclhjb2RlOCIsIlNpbXVsYXRvclhjb2RlOSIsIlNpbXVsYXRvclhjb2RlOTMiLCJTaW11bGF0b3JYY29kZTEwIiwiU2ltdWxhdG9yWGNvZGUxMV80IiwiU2ltdWxhdG9yWGNvZGUxMSIsImdldERldmljZVN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0EsU0FBU0Esc0JBQVQsQ0FBaUNDLFlBQWpDLEVBQStDO0FBQzdDLE1BQUlBLFlBQVksQ0FBQ0MsS0FBYixHQUFxQixDQUF6QixFQUE0QjtBQUMxQixVQUFNLElBQUlDLEtBQUosQ0FBVywyQ0FBRCxHQUNDLFdBQVVGLFlBQVksQ0FBQ0csYUFBYywwQkFEdEMsR0FFQyw0QkFGWCxDQUFOO0FBR0Q7QUFDRjs7QUFlRCxlQUFlQyxZQUFmLENBQTZCQyxJQUE3QixFQUFtQ0MsSUFBSSxHQUFHLEVBQTFDLEVBQThDO0FBQzVDLE1BQUk7QUFDRkMsSUFBQUEsUUFBUSxHQUFHLEtBRFQ7QUFFRkMsSUFBQUEsY0FBYyxHQUFHO0FBRmYsTUFHQUYsSUFISjtBQUtBLFFBQU1OLFlBQVksR0FBRyxNQUFNUyxxQkFBTUMsVUFBTixDQUFpQixJQUFqQixDQUEzQjs7QUFDQSxNQUFJRixjQUFKLEVBQW9CO0FBQ2xCLFVBQU1HLGFBQWEsR0FBRyxNQUFNLDZCQUFpQk4sSUFBakIsQ0FBNUI7O0FBRUEsUUFBSSxDQUFDTSxhQUFMLEVBQW9CO0FBQ2xCLFlBQU0sSUFBSVQsS0FBSixDQUFXLDJCQUEwQkcsSUFBSyxHQUExQyxDQUFOO0FBQ0Q7O0FBRURFLElBQUFBLFFBQVEsR0FBR0ksYUFBYSxDQUFDSixRQUF6QjtBQUNEOztBQUdELGtDQUFtQkEsUUFBbkI7O0FBRUFLLGNBQUlDLElBQUosQ0FBVSxnQkFBZU4sUUFBUyxnQ0FBK0JQLFlBQVksQ0FBQ0csYUFBYyxHQUFuRixHQUNDLGNBQWFFLElBQUssR0FENUI7O0FBRUEsTUFBSVMsUUFBSjs7QUFDQSxVQUFRZCxZQUFZLENBQUNDLEtBQXJCO0FBQ0UsU0FBSyxDQUFMO0FBQ0VhLE1BQUFBLFFBQVEsR0FBR0MsdUJBQVg7QUFDQTs7QUFDRixTQUFLLENBQUw7QUFDRSxVQUFJZixZQUFZLENBQUNnQixLQUFiLEdBQXFCLENBQXpCLEVBQTRCO0FBQzFCRixRQUFBQSxRQUFRLEdBQUdHLHdCQUFYO0FBQ0QsT0FGRCxNQUVPO0FBQ0xILFFBQUFBLFFBQVEsR0FBR0ksd0JBQVg7QUFDRDs7QUFDRDs7QUFDRixTQUFLLENBQUw7QUFDRUosTUFBQUEsUUFBUSxHQUFHSyx3QkFBWDtBQUNBOztBQUNGLFNBQUssQ0FBTDtBQUNFLFVBQUluQixZQUFZLENBQUNnQixLQUFiLEdBQXFCLENBQXpCLEVBQTRCO0FBQzFCRixRQUFBQSxRQUFRLEdBQUdNLHdCQUFYO0FBQ0QsT0FGRCxNQUVPO0FBQ0xOLFFBQUFBLFFBQVEsR0FBR08sd0JBQVg7QUFDRDs7QUFDRDs7QUFDRixTQUFLLEVBQUw7QUFDRVAsTUFBQUEsUUFBUSxHQUFHUSx3QkFBWDtBQUNBOztBQUNGLFNBQUssRUFBTDtBQUNFLFVBQUl0QixZQUFZLENBQUNnQixLQUFiLElBQXNCLENBQTFCLEVBQTZCO0FBQzNCRixRQUFBQSxRQUFRLEdBQUdTLHdCQUFYO0FBQ0QsT0FGRCxNQUVPO0FBQ0xULFFBQUFBLFFBQVEsR0FBR1Usd0JBQVg7QUFDRDs7QUFDRDs7QUFDRjtBQUNFekIsTUFBQUEsc0JBQXNCLENBQUNDLFlBQUQsQ0FBdEI7QUFDQWMsTUFBQUEsUUFBUSxHQUFHUSx3QkFBWDtBQWpDSjs7QUFvQ0EsU0FBTyxJQUFJUixRQUFKLENBQWFULElBQWIsRUFBbUJMLFlBQW5CLENBQVA7QUFDRDs7QUFpQkQsZUFBZXlCLGVBQWYsQ0FBZ0NuQixJQUFoQyxFQUFzQztBQUNwQyxNQUFJTixZQUFZLEdBQUcsTUFBTVMscUJBQU1DLFVBQU4sQ0FBaUIsSUFBakIsQ0FBekI7QUFFQVgsRUFBQUEsc0JBQXNCLENBQUNDLFlBQUQsQ0FBdEI7O0FBRUFZLGNBQUlDLElBQUosQ0FBVSxtREFBa0RiLFlBQVksQ0FBQ0csYUFBYyxFQUF2Rjs7QUFDQSxNQUFJSCxZQUFZLENBQUNDLEtBQWIsSUFBc0IsQ0FBMUIsRUFBNkI7QUFDM0IsV0FBTyxNQUFNZ0IseUJBQWdCUSxlQUFoQixDQUFnQ25CLElBQWhDLENBQWI7QUFDRCxHQUZELE1BRU8sSUFBSU4sWUFBWSxDQUFDQyxLQUFiLEtBQXVCLENBQTNCLEVBQThCO0FBQ25DLFdBQU8sTUFBTWdCLHlCQUFnQlEsZUFBaEIsQ0FBZ0NuQixJQUFoQyxDQUFiO0FBQ0QsR0FGTSxNQUVBLElBQUlOLFlBQVksQ0FBQ0MsS0FBYixLQUF1QixDQUEzQixFQUE4QjtBQUNuQyxXQUFPLE1BQU1jLHdCQUFnQlUsZUFBaEIsQ0FBZ0NuQixJQUFoQyxDQUFiO0FBQ0Q7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTaW11bGF0b3JYY29kZTYgZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtNic7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGU3IGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTcnO1xuaW1wb3J0IFNpbXVsYXRvclhjb2RlNzMgZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtNy4zJztcbmltcG9ydCBTaW11bGF0b3JYY29kZTggZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtOCc7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGU5IGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTknO1xuaW1wb3J0IFNpbXVsYXRvclhjb2RlOTMgZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtOS4zJztcbmltcG9ydCBTaW11bGF0b3JYY29kZTEwIGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTEwJztcbmltcG9ydCBTaW11bGF0b3JYY29kZTExIGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTExJztcbmltcG9ydCBTaW11bGF0b3JYY29kZTExXzQgZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtMTEuNCc7XG5pbXBvcnQgeyBnZXRTaW11bGF0b3JJbmZvIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeGNvZGUgZnJvbSAnYXBwaXVtLXhjb2RlJztcbmltcG9ydCB7IGxvZywgc2V0TG9nZ2luZ1BsYXRmb3JtIH0gZnJvbSAnLi9sb2dnZXInO1xuXG5cbmZ1bmN0aW9uIGhhbmRsZVVuc3VwcG9ydGVkWGNvZGUgKHhjb2RlVmVyc2lvbikge1xuICBpZiAoeGNvZGVWZXJzaW9uLm1ham9yIDwgNikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVHJpZWQgdG8gdXNlIGFuIGlPUyBzaW11bGF0b3Igd2l0aCB4Y29kZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYHZlcnNpb24gJHt4Y29kZVZlcnNpb24udmVyc2lvblN0cmluZ30gYnV0IG9ubHkgWGNvZGUgdmVyc2lvbiBgICtcbiAgICAgICAgICAgICAgICAgICAgYDYuMC4wIGFuZCB1cCBhcmUgc3VwcG9ydGVkYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGaW5kcyBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBTaW11bGF0b3IgaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdWRpZCAtIFRoZSBJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIGFuIE9wdGlvbnMgb2JqZWN0IHRoYXQgY2FuIGluY2x1ZGUgdGhlIGBwbGF0Zm9ybWAgb2ZcbiAqICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNpbXVsYXRvciBhc3NvY2lhdGVkIHdpdGggdGhlIHVkaWQsIGFuZCBgY2hlY2tFeGlzdGVuY2VgLFxuICogICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBhbGxvd3Mgb25lIHRvIHNraXAgY2hlY2tpbmcgdGhhdCB0aGUgdWRpZCBpcyB2YWxpZFxuICogICAgICAgICAgICAgICAgICAgICAgICAoZGVmYXVsdHMgdG8gYHRydWVgKVxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBTaW11bGF0b3Igd2l0aCBnaXZlbiB1ZGlkIGRvZXMgbm90IGV4aXN0IGluIGRldmljZXMgbGlzdC5cbiAqICAgSWYgeW91IHdhbnQgdG8gY3JlYXRlIGEgbmV3IHNpbXVsYXRvciwgeW91IGNhbiB1c2UgdGhlIGBjcmVhdGVEZXZpY2UoKWAgbWV0aG9kIG9mXG4gKiAgIFtub2RlLXNpbWN0bF0oZ2l0aHViLmNvbS9hcHBpdW0vbm9kZS1zaW1jdGwpLlxuICogQHJldHVybiB7b2JqZWN0fSBTaW11bGF0b3Igb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgdWRpZCBwYXNzZWQgaW4uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFNpbXVsYXRvciAodWRpZCwgb3B0cyA9IHt9KSB7XG4gIGxldCB7XG4gICAgcGxhdGZvcm0gPSAnaU9TJyxcbiAgICBjaGVja0V4aXN0ZW5jZSA9IHRydWUsXG4gIH0gPSBvcHRzO1xuXG4gIGNvbnN0IHhjb2RlVmVyc2lvbiA9IGF3YWl0IHhjb2RlLmdldFZlcnNpb24odHJ1ZSk7XG4gIGlmIChjaGVja0V4aXN0ZW5jZSkge1xuICAgIGNvbnN0IHNpbXVsYXRvckluZm8gPSBhd2FpdCBnZXRTaW11bGF0b3JJbmZvKHVkaWQpO1xuXG4gICAgaWYgKCFzaW11bGF0b3JJbmZvKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHNpbSBmb3VuZCB3aXRoIHVkaWQgJyR7dWRpZH0nYCk7XG4gICAgfVxuXG4gICAgcGxhdGZvcm0gPSBzaW11bGF0b3JJbmZvLnBsYXRmb3JtO1xuICB9XG5cbiAgLy8gbWFrZSBzdXJlIHdlIGhhdmUgdGhlIHJpZ2h0IGxvZ2dpbmcgcHJlZml4XG4gIHNldExvZ2dpbmdQbGF0Zm9ybShwbGF0Zm9ybSk7XG5cbiAgbG9nLmluZm8oYENvbnN0cnVjdGluZyAke3BsYXRmb3JtfSBzaW11bGF0b3IgZm9yIFhjb2RlIHZlcnNpb24gJHt4Y29kZVZlcnNpb24udmVyc2lvblN0cmluZ30gYCArXG4gICAgICAgICAgIGB3aXRoIHVkaWQgJyR7dWRpZH0nYCk7XG4gIGxldCBTaW1DbGFzcztcbiAgc3dpdGNoICh4Y29kZVZlcnNpb24ubWFqb3IpIHtcbiAgICBjYXNlIDY6XG4gICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlNjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNzpcbiAgICAgIGlmICh4Y29kZVZlcnNpb24ubWlub3IgPCAzKSB7XG4gICAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGU3O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgU2ltQ2xhc3MgPSBTaW11bGF0b3JYY29kZTczO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA4OlxuICAgICAgU2ltQ2xhc3MgPSBTaW11bGF0b3JYY29kZTg7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDk6XG4gICAgICBpZiAoeGNvZGVWZXJzaW9uLm1pbm9yIDwgMykge1xuICAgICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlOTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGU5MztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTA6XG4gICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlMTA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExOlxuICAgICAgaWYgKHhjb2RlVmVyc2lvbi5taW5vciA+PSA0KSB7XG4gICAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGUxMV80O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgU2ltQ2xhc3MgPSBTaW11bGF0b3JYY29kZTExO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGhhbmRsZVVuc3VwcG9ydGVkWGNvZGUoeGNvZGVWZXJzaW9uKTtcbiAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGUxMDtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2ltQ2xhc3ModWRpZCwgeGNvZGVWZXJzaW9uKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhIHNldCBvZiBvcHRpb25zIGFuZCBmaW5kcyB0aGUgY29ycmVjdCBkZXZpY2Ugc3RyaW5nIGluIG9yZGVyIGZvciBJbnN0cnVtZW50cyB0b1xuICogaWRlbnRpZnkgdGhlIGNvcnJlY3Qgc2ltdWxhdG9yLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzIC0gVGhlIG9wdGlvbnMgYXZhaWxhYmxlIGFyZTpcbiAqICAgLSBgZGV2aWNlTmFtZWAgLSBhIG5hbWUgZm9yIHRoZSBkZXZpY2UuIElmIHRoZSBnaXZlbiBkZXZpY2UgbmFtZSBzdGFydHMgd2l0aCBgPWAsIHRoZSBuYW1lLCBsZXNzIHRoZSBlcXVhbHMgc2lnbiwgaXMgcmV0dXJuZWQuXG4gKiAgIC0gYHBsYXRmb3JtVmVyc2lvbmAgLSB0aGUgdmVyc2lvbiBvZiBpT1MgdG8gdXNlLiBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBYY29kZSdzIG1heGltdW0gU0RLIHZlcnNpb24uXG4gKiAgIC0gYGZvcmNlSXBob25lYCAtIGZvcmNlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBkZXZpY2Ugc3RyaW5nIHRvIGlQaG9uZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqICAgLSBgZm9yY2VJcGFkYCAtIGZvcmNlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBkZXZpY2Ugc3RyaW5nIHRvIGlQYWQuIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKiAgIElmIGJvdGggYGZvcmNlSXBob25lYCBhbmQgYGZvcmNlSXBhZGAgYXJlIHRydWUsIHRoZSBkZXZpY2Ugd2lsbCBiZSBmb3JjZWQgdG8gaVBob25lLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGZvdW5kIGRldmljZSBzdHJpbmcsIGZvciBleGFtcGxlOlxuICogICAnaVBob25lIDUgKDguNCknIHdpdGggWGNvZGUgNytcbiAqICAgJ2lQaG9uZSA1ICg4LjQgU2ltdWxhdG9yKScgd2l0aCBYY29kZSA2K1xuICovXG5hc3luYyBmdW5jdGlvbiBnZXREZXZpY2VTdHJpbmcgKG9wdHMpIHtcbiAgbGV0IHhjb2RlVmVyc2lvbiA9IGF3YWl0IHhjb2RlLmdldFZlcnNpb24odHJ1ZSk7XG5cbiAgaGFuZGxlVW5zdXBwb3J0ZWRYY29kZSh4Y29kZVZlcnNpb24pO1xuXG4gIGxvZy5pbmZvKGBSZXRyaWV2aW5nIGRldmljZSBuYW1lIHN0cmluZyBmb3IgWGNvZGUgdmVyc2lvbiAke3hjb2RlVmVyc2lvbi52ZXJzaW9uU3RyaW5nfWApO1xuICBpZiAoeGNvZGVWZXJzaW9uLm1ham9yID49IDgpIHtcbiAgICByZXR1cm4gYXdhaXQgU2ltdWxhdG9yWGNvZGU3LmdldERldmljZVN0cmluZyhvcHRzKTtcbiAgfSBlbHNlIGlmICh4Y29kZVZlcnNpb24ubWFqb3IgPT09IDcpIHtcbiAgICByZXR1cm4gYXdhaXQgU2ltdWxhdG9yWGNvZGU3LmdldERldmljZVN0cmluZyhvcHRzKTtcbiAgfSBlbHNlIGlmICh4Y29kZVZlcnNpb24ubWFqb3IgPT09IDYpIHtcbiAgICByZXR1cm4gYXdhaXQgU2ltdWxhdG9yWGNvZGU2LmdldERldmljZVN0cmluZyhvcHRzKTtcbiAgfVxufVxuXG5leHBvcnQgeyBnZXRTaW11bGF0b3IsIGdldERldmljZVN0cmluZyB9O1xuIl0sImZpbGUiOiJsaWIvc2ltdWxhdG9yLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
