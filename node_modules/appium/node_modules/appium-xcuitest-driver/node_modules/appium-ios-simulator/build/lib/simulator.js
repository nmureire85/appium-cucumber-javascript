"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSimulator = getSimulator;
exports.getDeviceString = getDeviceString;

require("source-map-support/register");

var _simulatorXcode = _interopRequireDefault(require("./simulator-xcode-6"));

var _simulatorXcode2 = _interopRequireDefault(require("./simulator-xcode-7"));

var _simulatorXcode3 = _interopRequireDefault(require("./simulator-xcode-7.3"));

var _simulatorXcode4 = _interopRequireDefault(require("./simulator-xcode-8"));

var _simulatorXcode5 = _interopRequireDefault(require("./simulator-xcode-9"));

var _simulatorXcode6 = _interopRequireDefault(require("./simulator-xcode-9.3"));

var _simulatorXcode7 = _interopRequireDefault(require("./simulator-xcode-10"));

var _simulatorXcode8 = _interopRequireDefault(require("./simulator-xcode-11"));

var _simulatorXcode9 = _interopRequireDefault(require("./simulator-xcode-11.4"));

var _utils = require("./utils");

var _appiumXcode = _interopRequireDefault(require("appium-xcode"));

var _logger = require("./logger");

function handleUnsupportedXcode(xcodeVersion) {
  if (xcodeVersion.major < 6) {
    throw new Error(`Tried to use an iOS simulator with xcode ` + `version ${xcodeVersion.versionString} but only Xcode version ` + `6.0.0 and up are supported`);
  }
}

async function getSimulator(udid, opts = {}) {
  let {
    platform = 'iOS',
    checkExistence = true
  } = opts;
  const xcodeVersion = await _appiumXcode.default.getVersion(true);

  if (checkExistence) {
    const simulatorInfo = await (0, _utils.getSimulatorInfo)(udid);

    if (!simulatorInfo) {
      throw new Error(`No sim found with udid '${udid}'`);
    }

    platform = simulatorInfo.platform;
  }

  (0, _logger.setLoggingPlatform)(platform);

  _logger.log.info(`Constructing ${platform} simulator for Xcode version ${xcodeVersion.versionString} ` + `with udid '${udid}'`);

  let SimClass;

  switch (xcodeVersion.major) {
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
      handleUnsupportedXcode(xcodeVersion);
      break;

    case 6:
      SimClass = _simulatorXcode.default;
      break;

    case 7:
      if (xcodeVersion.minor < 3) {
        SimClass = _simulatorXcode2.default;
      } else {
        SimClass = _simulatorXcode3.default;
      }

      break;

    case 8:
      SimClass = _simulatorXcode4.default;
      break;

    case 9:
      if (xcodeVersion.minor < 3) {
        SimClass = _simulatorXcode5.default;
      } else {
        SimClass = _simulatorXcode6.default;
      }

      break;

    case 10:
      SimClass = _simulatorXcode7.default;
      break;

    case 11:
    case 12:
    default:
      if (xcodeVersion.major > 11 || xcodeVersion.minor >= 4) {
        SimClass = _simulatorXcode9.default;
      } else {
        SimClass = _simulatorXcode8.default;
      }

      break;
  }

  return new SimClass(udid, xcodeVersion);
}

async function getDeviceString(opts) {
  let xcodeVersion = await _appiumXcode.default.getVersion(true);
  handleUnsupportedXcode(xcodeVersion);

  _logger.log.info(`Retrieving device name string for Xcode version ${xcodeVersion.versionString}`);

  if (xcodeVersion.major >= 8) {
    return await _simulatorXcode2.default.getDeviceString(opts);
  } else if (xcodeVersion.major === 7) {
    return await _simulatorXcode2.default.getDeviceString(opts);
  } else if (xcodeVersion.major === 6) {
    return await _simulatorXcode.default.getDeviceString(opts);
  }
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zaW11bGF0b3IuanMiXSwibmFtZXMiOlsiaGFuZGxlVW5zdXBwb3J0ZWRYY29kZSIsInhjb2RlVmVyc2lvbiIsIm1ham9yIiwiRXJyb3IiLCJ2ZXJzaW9uU3RyaW5nIiwiZ2V0U2ltdWxhdG9yIiwidWRpZCIsIm9wdHMiLCJwbGF0Zm9ybSIsImNoZWNrRXhpc3RlbmNlIiwieGNvZGUiLCJnZXRWZXJzaW9uIiwic2ltdWxhdG9ySW5mbyIsImxvZyIsImluZm8iLCJTaW1DbGFzcyIsIlNpbXVsYXRvclhjb2RlNiIsIm1pbm9yIiwiU2ltdWxhdG9yWGNvZGU3IiwiU2ltdWxhdG9yWGNvZGU3MyIsIlNpbXVsYXRvclhjb2RlOCIsIlNpbXVsYXRvclhjb2RlOSIsIlNpbXVsYXRvclhjb2RlOTMiLCJTaW11bGF0b3JYY29kZTEwIiwiU2ltdWxhdG9yWGNvZGUxMV80IiwiU2ltdWxhdG9yWGNvZGUxMSIsImdldERldmljZVN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0EsU0FBU0Esc0JBQVQsQ0FBaUNDLFlBQWpDLEVBQStDO0FBQzdDLE1BQUlBLFlBQVksQ0FBQ0MsS0FBYixHQUFxQixDQUF6QixFQUE0QjtBQUMxQixVQUFNLElBQUlDLEtBQUosQ0FBVywyQ0FBRCxHQUNDLFdBQVVGLFlBQVksQ0FBQ0csYUFBYywwQkFEdEMsR0FFQyw0QkFGWCxDQUFOO0FBR0Q7QUFDRjs7QUFlRCxlQUFlQyxZQUFmLENBQTZCQyxJQUE3QixFQUFtQ0MsSUFBSSxHQUFHLEVBQTFDLEVBQThDO0FBQzVDLE1BQUk7QUFDRkMsSUFBQUEsUUFBUSxHQUFHLEtBRFQ7QUFFRkMsSUFBQUEsY0FBYyxHQUFHO0FBRmYsTUFHQUYsSUFISjtBQUtBLFFBQU1OLFlBQVksR0FBRyxNQUFNUyxxQkFBTUMsVUFBTixDQUFpQixJQUFqQixDQUEzQjs7QUFDQSxNQUFJRixjQUFKLEVBQW9CO0FBQ2xCLFVBQU1HLGFBQWEsR0FBRyxNQUFNLDZCQUFpQk4sSUFBakIsQ0FBNUI7O0FBRUEsUUFBSSxDQUFDTSxhQUFMLEVBQW9CO0FBQ2xCLFlBQU0sSUFBSVQsS0FBSixDQUFXLDJCQUEwQkcsSUFBSyxHQUExQyxDQUFOO0FBQ0Q7O0FBRURFLElBQUFBLFFBQVEsR0FBR0ksYUFBYSxDQUFDSixRQUF6QjtBQUNEOztBQUdELGtDQUFtQkEsUUFBbkI7O0FBRUFLLGNBQUlDLElBQUosQ0FBVSxnQkFBZU4sUUFBUyxnQ0FBK0JQLFlBQVksQ0FBQ0csYUFBYyxHQUFuRixHQUNDLGNBQWFFLElBQUssR0FENUI7O0FBRUEsTUFBSVMsUUFBSjs7QUFDQSxVQUFRZCxZQUFZLENBQUNDLEtBQXJCO0FBRUUsU0FBSyxDQUFMO0FBQ0EsU0FBSyxDQUFMO0FBQ0EsU0FBSyxDQUFMO0FBQ0EsU0FBSyxDQUFMO0FBQ0EsU0FBSyxDQUFMO0FBQ0VGLE1BQUFBLHNCQUFzQixDQUFDQyxZQUFELENBQXRCO0FBQ0E7O0FBQ0YsU0FBSyxDQUFMO0FBQ0VjLE1BQUFBLFFBQVEsR0FBR0MsdUJBQVg7QUFDQTs7QUFDRixTQUFLLENBQUw7QUFDRSxVQUFJZixZQUFZLENBQUNnQixLQUFiLEdBQXFCLENBQXpCLEVBQTRCO0FBQzFCRixRQUFBQSxRQUFRLEdBQUdHLHdCQUFYO0FBQ0QsT0FGRCxNQUVPO0FBQ0xILFFBQUFBLFFBQVEsR0FBR0ksd0JBQVg7QUFDRDs7QUFDRDs7QUFDRixTQUFLLENBQUw7QUFDRUosTUFBQUEsUUFBUSxHQUFHSyx3QkFBWDtBQUNBOztBQUNGLFNBQUssQ0FBTDtBQUNFLFVBQUluQixZQUFZLENBQUNnQixLQUFiLEdBQXFCLENBQXpCLEVBQTRCO0FBQzFCRixRQUFBQSxRQUFRLEdBQUdNLHdCQUFYO0FBQ0QsT0FGRCxNQUVPO0FBQ0xOLFFBQUFBLFFBQVEsR0FBR08sd0JBQVg7QUFDRDs7QUFDRDs7QUFDRixTQUFLLEVBQUw7QUFDRVAsTUFBQUEsUUFBUSxHQUFHUSx3QkFBWDtBQUNBOztBQUNGLFNBQUssRUFBTDtBQUNBLFNBQUssRUFBTDtBQUNBO0FBQ0UsVUFBSXRCLFlBQVksQ0FBQ0MsS0FBYixHQUFxQixFQUFyQixJQUEyQkQsWUFBWSxDQUFDZ0IsS0FBYixJQUFzQixDQUFyRCxFQUF3RDtBQUN0REYsUUFBQUEsUUFBUSxHQUFHUyx3QkFBWDtBQUNELE9BRkQsTUFFTztBQUNMVCxRQUFBQSxRQUFRLEdBQUdVLHdCQUFYO0FBQ0Q7O0FBQ0Q7QUF4Q0o7O0FBMkNBLFNBQU8sSUFBSVYsUUFBSixDQUFhVCxJQUFiLEVBQW1CTCxZQUFuQixDQUFQO0FBQ0Q7O0FBaUJELGVBQWV5QixlQUFmLENBQWdDbkIsSUFBaEMsRUFBc0M7QUFDcEMsTUFBSU4sWUFBWSxHQUFHLE1BQU1TLHFCQUFNQyxVQUFOLENBQWlCLElBQWpCLENBQXpCO0FBRUFYLEVBQUFBLHNCQUFzQixDQUFDQyxZQUFELENBQXRCOztBQUVBWSxjQUFJQyxJQUFKLENBQVUsbURBQWtEYixZQUFZLENBQUNHLGFBQWMsRUFBdkY7O0FBQ0EsTUFBSUgsWUFBWSxDQUFDQyxLQUFiLElBQXNCLENBQTFCLEVBQTZCO0FBQzNCLFdBQU8sTUFBTWdCLHlCQUFnQlEsZUFBaEIsQ0FBZ0NuQixJQUFoQyxDQUFiO0FBQ0QsR0FGRCxNQUVPLElBQUlOLFlBQVksQ0FBQ0MsS0FBYixLQUF1QixDQUEzQixFQUE4QjtBQUNuQyxXQUFPLE1BQU1nQix5QkFBZ0JRLGVBQWhCLENBQWdDbkIsSUFBaEMsQ0FBYjtBQUNELEdBRk0sTUFFQSxJQUFJTixZQUFZLENBQUNDLEtBQWIsS0FBdUIsQ0FBM0IsRUFBOEI7QUFDbkMsV0FBTyxNQUFNYyx3QkFBZ0JVLGVBQWhCLENBQWdDbkIsSUFBaEMsQ0FBYjtBQUNEO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2ltdWxhdG9yWGNvZGU2IGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTYnO1xuaW1wb3J0IFNpbXVsYXRvclhjb2RlNyBmcm9tICcuL3NpbXVsYXRvci14Y29kZS03JztcbmltcG9ydCBTaW11bGF0b3JYY29kZTczIGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTcuMyc7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGU4IGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTgnO1xuaW1wb3J0IFNpbXVsYXRvclhjb2RlOSBmcm9tICcuL3NpbXVsYXRvci14Y29kZS05JztcbmltcG9ydCBTaW11bGF0b3JYY29kZTkzIGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTkuMyc7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGUxMCBmcm9tICcuL3NpbXVsYXRvci14Y29kZS0xMCc7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGUxMSBmcm9tICcuL3NpbXVsYXRvci14Y29kZS0xMSc7XG5pbXBvcnQgU2ltdWxhdG9yWGNvZGUxMV80IGZyb20gJy4vc2ltdWxhdG9yLXhjb2RlLTExLjQnO1xuaW1wb3J0IHsgZ2V0U2ltdWxhdG9ySW5mbyB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHhjb2RlIGZyb20gJ2FwcGl1bS14Y29kZSc7XG5pbXBvcnQgeyBsb2csIHNldExvZ2dpbmdQbGF0Zm9ybSB9IGZyb20gJy4vbG9nZ2VyJztcblxuXG5mdW5jdGlvbiBoYW5kbGVVbnN1cHBvcnRlZFhjb2RlICh4Y29kZVZlcnNpb24pIHtcbiAgaWYgKHhjb2RlVmVyc2lvbi5tYWpvciA8IDYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRyaWVkIHRvIHVzZSBhbiBpT1Mgc2ltdWxhdG9yIHdpdGggeGNvZGUgYCArXG4gICAgICAgICAgICAgICAgICAgIGB2ZXJzaW9uICR7eGNvZGVWZXJzaW9uLnZlcnNpb25TdHJpbmd9IGJ1dCBvbmx5IFhjb2RlIHZlcnNpb24gYCArXG4gICAgICAgICAgICAgICAgICAgIGA2LjAuMCBhbmQgdXAgYXJlIHN1cHBvcnRlZGApO1xuICB9XG59XG5cbi8qKlxuICogRmluZHMgYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgU2ltdWxhdG9yIGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgSUQgb2YgYW4gZXhpc3RpbmcgU2ltdWxhdG9yLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBhbiBPcHRpb25zIG9iamVjdCB0aGF0IGNhbiBpbmNsdWRlIHRoZSBgcGxhdGZvcm1gIG9mXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBzaW11bGF0b3IgYXNzb2NpYXRlZCB3aXRoIHRoZSB1ZGlkLCBhbmQgYGNoZWNrRXhpc3RlbmNlYCxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggYWxsb3dzIG9uZSB0byBza2lwIGNoZWNraW5nIHRoYXQgdGhlIHVkaWQgaXMgdmFsaWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgKGRlZmF1bHRzIHRvIGB0cnVlYClcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgU2ltdWxhdG9yIHdpdGggZ2l2ZW4gdWRpZCBkb2VzIG5vdCBleGlzdCBpbiBkZXZpY2VzIGxpc3QuXG4gKiAgIElmIHlvdSB3YW50IHRvIGNyZWF0ZSBhIG5ldyBzaW11bGF0b3IsIHlvdSBjYW4gdXNlIHRoZSBgY3JlYXRlRGV2aWNlKClgIG1ldGhvZCBvZlxuICogICBbbm9kZS1zaW1jdGxdKGdpdGh1Yi5jb20vYXBwaXVtL25vZGUtc2ltY3RsKS5cbiAqIEByZXR1cm4ge29iamVjdH0gU2ltdWxhdG9yIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIHVkaWQgcGFzc2VkIGluLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRTaW11bGF0b3IgKHVkaWQsIG9wdHMgPSB7fSkge1xuICBsZXQge1xuICAgIHBsYXRmb3JtID0gJ2lPUycsXG4gICAgY2hlY2tFeGlzdGVuY2UgPSB0cnVlLFxuICB9ID0gb3B0cztcblxuICBjb25zdCB4Y29kZVZlcnNpb24gPSBhd2FpdCB4Y29kZS5nZXRWZXJzaW9uKHRydWUpO1xuICBpZiAoY2hlY2tFeGlzdGVuY2UpIHtcbiAgICBjb25zdCBzaW11bGF0b3JJbmZvID0gYXdhaXQgZ2V0U2ltdWxhdG9ySW5mbyh1ZGlkKTtcblxuICAgIGlmICghc2ltdWxhdG9ySW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzaW0gZm91bmQgd2l0aCB1ZGlkICcke3VkaWR9J2ApO1xuICAgIH1cblxuICAgIHBsYXRmb3JtID0gc2ltdWxhdG9ySW5mby5wbGF0Zm9ybTtcbiAgfVxuXG4gIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSByaWdodCBsb2dnaW5nIHByZWZpeFxuICBzZXRMb2dnaW5nUGxhdGZvcm0ocGxhdGZvcm0pO1xuXG4gIGxvZy5pbmZvKGBDb25zdHJ1Y3RpbmcgJHtwbGF0Zm9ybX0gc2ltdWxhdG9yIGZvciBYY29kZSB2ZXJzaW9uICR7eGNvZGVWZXJzaW9uLnZlcnNpb25TdHJpbmd9IGAgK1xuICAgICAgICAgICBgd2l0aCB1ZGlkICcke3VkaWR9J2ApO1xuICBsZXQgU2ltQ2xhc3M7XG4gIHN3aXRjaCAoeGNvZGVWZXJzaW9uLm1ham9yKSB7XG4gICAgLy8gRWFybHksIHVuc3VwcG9ydGVkIFhjb2Rlc1xuICAgIGNhc2UgMTpcbiAgICBjYXNlIDI6XG4gICAgY2FzZSAzOlxuICAgIGNhc2UgNDpcbiAgICBjYXNlIDU6XG4gICAgICBoYW5kbGVVbnN1cHBvcnRlZFhjb2RlKHhjb2RlVmVyc2lvbik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDY6XG4gICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlNjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNzpcbiAgICAgIGlmICh4Y29kZVZlcnNpb24ubWlub3IgPCAzKSB7XG4gICAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGU3O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgU2ltQ2xhc3MgPSBTaW11bGF0b3JYY29kZTczO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA4OlxuICAgICAgU2ltQ2xhc3MgPSBTaW11bGF0b3JYY29kZTg7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDk6XG4gICAgICBpZiAoeGNvZGVWZXJzaW9uLm1pbm9yIDwgMykge1xuICAgICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlOTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGU5MztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTA6XG4gICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlMTA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExOlxuICAgIGNhc2UgMTI6XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmICh4Y29kZVZlcnNpb24ubWFqb3IgPiAxMSB8fCB4Y29kZVZlcnNpb24ubWlub3IgPj0gNCkge1xuICAgICAgICBTaW1DbGFzcyA9IFNpbXVsYXRvclhjb2RlMTFfNDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFNpbUNsYXNzID0gU2ltdWxhdG9yWGNvZGUxMTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBTaW1DbGFzcyh1ZGlkLCB4Y29kZVZlcnNpb24pO1xufVxuXG4vKipcbiAqIFRha2VzIGEgc2V0IG9mIG9wdGlvbnMgYW5kIGZpbmRzIHRoZSBjb3JyZWN0IGRldmljZSBzdHJpbmcgaW4gb3JkZXIgZm9yIEluc3RydW1lbnRzIHRvXG4gKiBpZGVudGlmeSB0aGUgY29ycmVjdCBzaW11bGF0b3IuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdHMgLSBUaGUgb3B0aW9ucyBhdmFpbGFibGUgYXJlOlxuICogICAtIGBkZXZpY2VOYW1lYCAtIGEgbmFtZSBmb3IgdGhlIGRldmljZS4gSWYgdGhlIGdpdmVuIGRldmljZSBuYW1lIHN0YXJ0cyB3aXRoIGA9YCwgdGhlIG5hbWUsIGxlc3MgdGhlIGVxdWFscyBzaWduLCBpcyByZXR1cm5lZC5cbiAqICAgLSBgcGxhdGZvcm1WZXJzaW9uYCAtIHRoZSB2ZXJzaW9uIG9mIGlPUyB0byB1c2UuIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IFhjb2RlJ3MgbWF4aW11bSBTREsgdmVyc2lvbi5cbiAqICAgLSBgZm9yY2VJcGhvbmVgIC0gZm9yY2UgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGRldmljZSBzdHJpbmcgdG8gaVBob25lLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICogICAtIGBmb3JjZUlwYWRgIC0gZm9yY2UgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGRldmljZSBzdHJpbmcgdG8gaVBhZC4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqICAgSWYgYm90aCBgZm9yY2VJcGhvbmVgIGFuZCBgZm9yY2VJcGFkYCBhcmUgdHJ1ZSwgdGhlIGRldmljZSB3aWxsIGJlIGZvcmNlZCB0byBpUGhvbmUuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgZm91bmQgZGV2aWNlIHN0cmluZywgZm9yIGV4YW1wbGU6XG4gKiAgICdpUGhvbmUgNSAoOC40KScgd2l0aCBYY29kZSA3K1xuICogICAnaVBob25lIDUgKDguNCBTaW11bGF0b3IpJyB3aXRoIFhjb2RlIDYrXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldERldmljZVN0cmluZyAob3B0cykge1xuICBsZXQgeGNvZGVWZXJzaW9uID0gYXdhaXQgeGNvZGUuZ2V0VmVyc2lvbih0cnVlKTtcblxuICBoYW5kbGVVbnN1cHBvcnRlZFhjb2RlKHhjb2RlVmVyc2lvbik7XG5cbiAgbG9nLmluZm8oYFJldHJpZXZpbmcgZGV2aWNlIG5hbWUgc3RyaW5nIGZvciBYY29kZSB2ZXJzaW9uICR7eGNvZGVWZXJzaW9uLnZlcnNpb25TdHJpbmd9YCk7XG4gIGlmICh4Y29kZVZlcnNpb24ubWFqb3IgPj0gOCkge1xuICAgIHJldHVybiBhd2FpdCBTaW11bGF0b3JYY29kZTcuZ2V0RGV2aWNlU3RyaW5nKG9wdHMpO1xuICB9IGVsc2UgaWYgKHhjb2RlVmVyc2lvbi5tYWpvciA9PT0gNykge1xuICAgIHJldHVybiBhd2FpdCBTaW11bGF0b3JYY29kZTcuZ2V0RGV2aWNlU3RyaW5nKG9wdHMpO1xuICB9IGVsc2UgaWYgKHhjb2RlVmVyc2lvbi5tYWpvciA9PT0gNikge1xuICAgIHJldHVybiBhd2FpdCBTaW11bGF0b3JYY29kZTYuZ2V0RGV2aWNlU3RyaW5nKG9wdHMpO1xuICB9XG59XG5cbmV4cG9ydCB7IGdldFNpbXVsYXRvciwgZ2V0RGV2aWNlU3RyaW5nIH07XG4iXSwiZmlsZSI6ImxpYi9zaW11bGF0b3IuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
